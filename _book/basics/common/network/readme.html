
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>network · LayaAir3 Engine Documentation · LAYABOX</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../../../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../../../gitbook/gitbook-plugin-expandable-chapters-small/expandable-chapters-small.css">
                
            
                
                <link rel="stylesheet" href="../../../gitbook/gitbook-plugin-sidebar-style/plugin.css">
                
            
                
                <link rel="stylesheet" href="../../../gitbook/gitbook-plugin-anchor-navigation-ex/style/plugin.css">
                
            
                
                <link rel="stylesheet" href="../../../gitbook/gitbook-plugin-search-pro/search.css">
                
            
                
                <link rel="stylesheet" href="../../../gitbook/gitbook-plugin-versions-select/plugin.css">
                
            
                
                <link rel="stylesheet" href="../../../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
                
                <link rel="stylesheet" href="../../../gitbook/gitbook-plugin-prism/prism-solarizedlight.css">
                
            
                
                <link rel="stylesheet" href="../../../gitbook/gitbook-plugin-splitter/splitter.css">
                
            
                
                <link rel="stylesheet" href="../../../gitbook/gitbook-plugin-code/plugin.css">
                
            
                
                <link rel="stylesheet" href="../../../gitbook/gitbook-plugin-flexible-alerts/style.css">
                
            
                
                <link rel="stylesheet" href="../../../gitbook/gitbook-plugin-auto-scroll-table/website.css">
                
            
                
                <link rel="stylesheet" href="../../../gitbook/gitbook-plugin-tbfed-pagefooter/footer.css">
                
            
                
                <link rel="stylesheet" href="../../../gitbook/gitbook-plugin-highlight/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../../../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="../adaptScreen/readme.html" />
    
    
    <link rel="prev" href="../Pool/readme.html" />
    

    
        <link rel="shortcut icon" href="./style/favicon-32.ico" type="image/x-icon">
    
    
        <link rel="bookmark" href="./style/favicon-32.ico" type="image/x-icon">
    
    
    
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="./style/layabox-152.png">
    
    
        
    
    
        
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" >
            
                <span>
            
                    
                    Beginners
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.1.1" data-path="../../../">
            
                <a href="../../../">
            
                    
                    Introduction
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.1.1.1" data-path="../../readme.html">
            
                <a href="../../readme.html">
            
                    
                    Features
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.1.2" data-path="../../developmentEnvironment/readme.html">
            
                <a href="../../developmentEnvironment/readme.html">
            
                    
                    Development Environment
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.1.2.1" data-path="../../developmentEnvironment/download/readme.html">
            
                <a href="../../developmentEnvironment/download/readme.html">
            
                    
                    Install
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.2.2" data-path="../../IDE/GUI/readme.html">
            
                <a href="../../IDE/GUI/readme.html">
            
                    
                    GUI
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.1.3" data-path="../../essentialSkills/readme.html">
            
                <a href="../../essentialSkills/readme.html">
            
                    
                    Essential Skills
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.1.3.1" data-path="../../language/readme.html">
            
                <a href="../../language/readme.html">
            
                    
                    Language
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.3.2" data-path="../../DevTools/readme.html">
            
                <a href="../../DevTools/readme.html">
            
                    
                    DevTools
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.3.3" data-path="../../LayaTree/readme.html">
            
                <a href="../../LayaTree/readme.html">
            
                    
                    LayaTree
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2" >
            
                <span>
            
                    
                    Engine Basics
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="../../IDE/readme.html">
            
                <a href="../../IDE/readme.html">
            
                    
                    IDE Basics
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1.1" data-path="../../IDE/layouts/readme.html">
            
                <a href="../../IDE/layouts/readme.html">
            
                    
                    layouts
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.2" data-path="../../IDE/projecFolders/readme.html">
            
                <a href="../../IDE/projecFolders/readme.html">
            
                    
                    projecFolders
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.3" data-path="../../IDE/projectSettings/readme.html">
            
                <a href="../../IDE/projectSettings/readme.html">
            
                    
                    projectSettings
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.4" data-path="../../IDE/entry/readme.html">
            
                <a href="../../IDE/entry/readme.html">
            
                    
                    entry
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.5" data-path="../../IDE/importJsLibrary/readme.html">
            
                <a href="../../IDE/importJsLibrary/readme.html">
            
                    
                    import Js Library
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.6" data-path="../../IDE/Hierarchy/readme.html">
            
                <a href="../../IDE/Hierarchy/readme.html">
            
                    
                    Hierarchy
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.7" data-path="../../IDE/assets/readme.html">
            
                <a href="../../IDE/assets/readme.html">
            
                    
                    assets
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.8" data-path="../../IDE/Inspector/readme.html">
            
                <a href="../../IDE/Inspector/readme.html">
            
                    
                    Inspector
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.9" data-path="../../IDE/Game/readme.html">
            
                <a href="../../IDE/Game/readme.html">
            
                    
                    Game
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.10" data-path="../../IDE/shortcutKeyCombinations/readme.html">
            
                <a href="../../IDE/shortcutKeyCombinations/readme.html">
            
                    
                    shortcutKey Combinations
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="../readme.html">
            
                <a href="../readme.html">
            
                    
                    Engine General Basics
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.2.1" data-path="../terms/readme.html">
            
                <a href="../terms/readme.html">
            
                    
                    basics
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.2" data-path="../Component/readme.html">
            
                <a href="../Component/readme.html">
            
                    
                    Component
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.3" data-path="../Loader/readme.html">
            
                <a href="../Loader/readme.html">
            
                    
                    Loader
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.4" data-path="../Scene/readme.html">
            
                <a href="../Scene/readme.html">
            
                    
                    Scene
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.5" data-path="../Node/readme.html">
            
                <a href="../Node/readme.html">
            
                    
                    Node
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.6" data-path="../Timer/readme.html">
            
                <a href="../Timer/readme.html">
            
                    
                    Timer
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.7" data-path="../Event/readme.html">
            
                <a href="../Event/readme.html">
            
                    
                    Event
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.8" data-path="../Tween/readme.html">
            
                <a href="../Tween/readme.html">
            
                    
                    Tween
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.9" data-path="../Pool/readme.html">
            
                <a href="../Pool/readme.html">
            
                    
                    Pool
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.2.2.10" data-path="readme.html">
            
                <a href="readme.html">
            
                    
                    network
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.11" data-path="../adaptScreen/readme.html">
            
                <a href="../adaptScreen/readme.html">
            
                    
                    adaptScreen
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.12" data-path="../Browser/readme.html">
            
                <a href="../Browser/readme.html">
            
                    
                    Browser
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.13" data-path="../device/readme.html">
            
                <a href="../device/readme.html">
            
                    
                    device
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.2.13.1" data-path="../device/media/readme.html">
            
                <a href="../device/media/readme.html">
            
                    
                    media
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.13.2" data-path="../device/motion/readme.html">
            
                <a href="../device/motion/readme.html">
            
                    
                    motion
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.2.14" data-path="../Stat/readme.html">
            
                <a href="../Stat/readme.html">
            
                    
                    Stat
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.3" data-path="../../3D/readme.html">
            
                <a href="../../3D/readme.html">
            
                    
                    Basic of 3D Engine
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.3.1" data-path="../../3D/beginner/readme.html">
            
                <a href="../../3D/beginner/readme.html">
            
                    
                    beginner
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3.2" data-path="../../3D/Transform/readme.html">
            
                <a href="../../3D/Transform/readme.html">
            
                    
                    Transform
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" >
            
                <span>
            
                    
                    Editor
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="../../../IDE/uiEditor/readme.html">
            
                <a href="../../../IDE/uiEditor/readme.html">
            
                    
                    UI Editor
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1.1" data-path="../../../IDE/uiEditor/basic/readme.html">
            
                <a href="../../../IDE/uiEditor/basic/readme.html">
            
                    
                    Basic Interaction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.2" data-path="../../../IDE/uiEditor/widgets/readme.html">
            
                <a href="../../../IDE/uiEditor/widgets/readme.html">
            
                    
                    widgets
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1.2.1" data-path="../../../2D/displayObject/readme.html">
            
                <a href="../../../2D/displayObject/readme.html">
            
                    
                    Display Object
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1.2.1.1" data-path="../../../2D/displayObject/Sprite/readme.html">
            
                <a href="../../../2D/displayObject/Sprite/readme.html">
            
                    
                    Sprite
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.2.1.2" data-path="../../../2D/displayObject/Animation/readme.html">
            
                <a href="../../../2D/displayObject/Animation/readme.html">
            
                    
                    Animation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.2.1.3" data-path="../../../2D/displayObject/Text/readme.html">
            
                <a href="../../../2D/displayObject/Text/readme.html">
            
                    
                    Text
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.2.1.4" data-path="../../../2D/displayObject/SoundNode/readme.html">
            
                <a href="../../../2D/displayObject/SoundNode/readme.html">
            
                    
                    Sound Node
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.2.1.5" data-path="../../../2D/displayObject/VideoNode/readme.html">
            
                <a href="../../../2D/displayObject/VideoNode/readme.html">
            
                    
                    Video Node
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.1.2.2" data-path="../../../IDE/uiEditor/uiComponent/readme.html">
            
                <a href="../../../IDE/uiEditor/uiComponent/readme.html">
            
                    
                    UIComponent
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1.2.2.1" data-path="../../../IDE/uiEditor/uiComponent/Image/readme.html">
            
                <a href="../../../IDE/uiEditor/uiComponent/Image/readme.html">
            
                    
                    Image
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.2.2.2" data-path="../../../IDE/uiEditor/uiComponent/Label/readme.html">
            
                <a href="../../../IDE/uiEditor/uiComponent/Label/readme.html">
            
                    
                    Label
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.2.2.3" data-path="../../../IDE/uiEditor/uiComponent/TextInput/readme.html">
            
                <a href="../../../IDE/uiEditor/uiComponent/TextInput/readme.html">
            
                    
                    TextInput
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1.2.2.3.1" data-path="../../../IDE/uiEditor/uiComponent/TextArea/readme.html">
            
                <a href="../../../IDE/uiEditor/uiComponent/TextArea/readme.html">
            
                    
                    TextArea
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.1.2.2.4" data-path="../../../IDE/uiEditor/uiComponent/Clip/readme.html">
            
                <a href="../../../IDE/uiEditor/uiComponent/Clip/readme.html">
            
                    
                    Clip
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1.2.2.4.1" data-path="../../../IDE/uiEditor/uiComponent/FontClip/readme.html">
            
                <a href="../../../IDE/uiEditor/uiComponent/FontClip/readme.html">
            
                    
                    FontClip
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.1.2.2.5" data-path="../../../IDE/uiEditor/uiComponent/Button/readme.html">
            
                <a href="../../../IDE/uiEditor/uiComponent/Button/readme.html">
            
                    
                    Button
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.2.2.6" data-path="../../../IDE/uiEditor/uiComponent/scroll/readme.html">
            
                <a href="../../../IDE/uiEditor/uiComponent/scroll/readme.html">
            
                    
                    scroll
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1.2.2.6.1" data-path="../../../IDE/uiEditor/uiComponent/HScrollBar/readme.html">
            
                <a href="../../../IDE/uiEditor/uiComponent/HScrollBar/readme.html">
            
                    
                    HScrollBar
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.2.2.6.2" data-path="../../../IDE/uiEditor/uiComponent/VScrollBar/readme.html">
            
                <a href="../../../IDE/uiEditor/uiComponent/VScrollBar/readme.html">
            
                    
                    VScrollBar
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.1.2.2.7" data-path="../../../IDE/uiEditor/uiComponent/slider/readme.html">
            
                <a href="../../../IDE/uiEditor/uiComponent/slider/readme.html">
            
                    
                    slider
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1.2.2.7.1" data-path="../../../IDE/uiEditor/uiComponent/readme.html">
            
                <a href="../../../IDE/uiEditor/uiComponent/readme.html">
            
                    
                    HSlider
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.2.2.7.2" data-path="../../../IDE/uiEditor/uiComponent/VSlider/readme.html">
            
                <a href="../../../IDE/uiEditor/uiComponent/VSlider/readme.html">
            
                    
                    VSlider
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.1.2.2.8" data-path="../../../IDE/uiEditor/uiComponent/ProgressBar/readme.html">
            
                <a href="../../../IDE/uiEditor/uiComponent/ProgressBar/readme.html">
            
                    
                    ProgressBar
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.2.2.9" data-path="../../../IDE/uiEditor/uiComponent/Box/readme.html">
            
                <a href="../../../IDE/uiEditor/uiComponent/Box/readme.html">
            
                    
                    Box
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1.2.2.9.1" data-path="../../../IDE/uiEditor/uiComponent/HBoox/readme.md">
            
                <span>
            
                    
                    HBoox
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.2.2.9.2" data-path="../../../IDE/uiEditor/uiComponent/VBox/readme.html">
            
                <a href="../../../IDE/uiEditor/uiComponent/VBox/readme.html">
            
                    
                    VBox
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.2.2.9.3" data-path="../../../IDE/uiEditor/uiComponent/Panel/readme.html">
            
                <a href="../../../IDE/uiEditor/uiComponent/Panel/readme.html">
            
                    
                    Panel
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.1.2.2.10" data-path="../../../IDE/uiEditor/uiComponent/List/readme.html">
            
                <a href="../../../IDE/uiEditor/uiComponent/List/readme.html">
            
                    
                    List
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1.2.2.10.1" data-path="../../../IDE/uiEditor/uiComponent/Tree/readme.html">
            
                <a href="../../../IDE/uiEditor/uiComponent/Tree/readme.html">
            
                    
                    Tree
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.1.2.2.11" data-path="../../../IDE/uiEditor/uiComponent/optionBox/readme.html">
            
                <a href="../../../IDE/uiEditor/uiComponent/optionBox/readme.html">
            
                    
                    optionBox
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1.2.2.11.1" data-path="../../../IDE/uiEditor/uiComponent/ComboBox/readme.html">
            
                <a href="../../../IDE/uiEditor/uiComponent/ComboBox/readme.html">
            
                    
                    ComboBox
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.2.2.11.2" data-path="../../../IDE/uiEditor/uiComponent/Radio/readme.html">
            
                <a href="../../../IDE/uiEditor/uiComponent/Radio/readme.html">
            
                    
                    Radio
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.2.2.11.3" data-path="../../../IDE/uiEditor/uiComponent/RadioGroup/readme.html">
            
                <a href="../../../IDE/uiEditor/uiComponent/RadioGroup/readme.html">
            
                    
                    RadioGroup
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.2.2.11.4" data-path="../../../IDE/uiEditor/uiComponent/CheckBox/readme.html">
            
                <a href="../../../IDE/uiEditor/uiComponent/CheckBox/readme.html">
            
                    
                    CheckBox
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.1.2.2.12" data-path="../../../IDE/uiEditor/uiComponent/navigationMenu/readme.html">
            
                <a href="../../../IDE/uiEditor/uiComponent/navigationMenu/readme.html">
            
                    
                    Navigation Menu
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1.2.2.12.1" data-path="../../../IDE/uiEditor/uiComponent/Tab/readme.html">
            
                <a href="../../../IDE/uiEditor/uiComponent/Tab/readme.html">
            
                    
                    Tab
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.2.2.12.2" data-path="../../../IDE/uiEditor/uiComponent/ViewStack/readme.html">
            
                <a href="../../../IDE/uiEditor/uiComponent/ViewStack/readme.html">
            
                    
                    ViewStack
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.1.2.2.13" data-path="../../../IDE/uiEditor/uiComponent/ColorPicker/readme.html">
            
                <a href="../../../IDE/uiEditor/uiComponent/ColorPicker/readme.html">
            
                    
                    ColorPicker
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.2.2.14" data-path="../../../IDE/uiEditor/uiComponent/OpenDataContextView/readme.html">
            
                <a href="../../../IDE/uiEditor/uiComponent/OpenDataContextView/readme.html">
            
                    
                    OpenDataContextView
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.2.2.15" data-path="../../../IDE/uiEditor/Dialog/readme.html">
            
                <a href="../../../IDE/uiEditor/Dialog/readme.html">
            
                    
                    Dialog
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.1.2.3" data-path="../../../IDE/uiEditor/uiComponent/skeleton/readme.html">
            
                <a href="../../../IDE/uiEditor/uiComponent/skeleton/readme.html">
            
                    
                    skeleton
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1.2.3.1" data-path="../../../IDE/uiEditor/uiComponent/skeleton/spine/readme.html">
            
                <a href="../../../IDE/uiEditor/uiComponent/skeleton/spine/readme.html">
            
                    
                    spine
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.2.3.2" data-path="../../../IDE/uiEditor/uiComponent/skeleton/sk/readme.html">
            
                <a href="../../../IDE/uiEditor/uiComponent/skeleton/sk/readme.html">
            
                    
                    sk
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.1.3" data-path="../../../IDE/uiEditor/readme.html">
            
                <a href="../../../IDE/uiEditor/readme.html">
            
                    
                    graphics
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.4" data-path="../../../IDE/uiEditor/Filter/readme.html">
            
                <a href="../../../IDE/uiEditor/Filter/readme.html">
            
                    
                    Filter
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.5" data-path="../../../IDE/uiEditor/runtime/readme.html">
            
                <a href="../../../IDE/uiEditor/runtime/readme.html">
            
                    
                    runtime
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.6" data-path="../../../IDE/uiEditor/use3D/readme.html">
            
                <a href="../../../IDE/uiEditor/use3D/readme.html">
            
                    
                    use3D
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.7" data-path="../../../IDE/uiEditor/textureCompress/readme.html">
            
                <a href="../../../IDE/uiEditor/textureCompress/readme.html">
            
                    
                    textureCompress
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.8" data-path="../../../IDE/uiEditor/3DUI/readme.html">
            
                <a href="../../../IDE/uiEditor/3DUI/readme.html">
            
                    
                    3D UI
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="../../../IDE/sceneEditor/readme.html">
            
                <a href="../../../IDE/sceneEditor/readme.html">
            
                    
                    Scene Editor
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.2.1" data-path="../../../IDE/sceneEditor/basic/readme.html">
            
                <a href="../../../IDE/sceneEditor/basic/readme.html">
            
                    
                    Basic Interaction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.2" data-path="../../../3D/Sprite3D/readme.html">
            
                <a href="../../../3D/Sprite3D/readme.html">
            
                    
                    Sprite3D
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.3" data-path="../../../3D/displayObject/readme.html">
            
                <a href="../../../3D/displayObject/readme.html">
            
                    
                    Display Object
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.4" data-path="../../../3D/Camera/readme.html">
            
                <a href="../../../3D/Camera/readme.html">
            
                    
                    Camera
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.5" data-path="../../../3D/Light/readme.html">
            
                <a href="../../../3D/Light/readme.html">
            
                    
                    Light
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.6" data-path="../../../IDE/sceneEditor/environment/readme.html">
            
                <a href="../../../IDE/sceneEditor/environment/readme.html">
            
                    
                    environment
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.7" data-path="../../../3D/useModel/readme.html">
            
                <a href="../../../3D/useModel/readme.html">
            
                    
                    useModel
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.3" data-path="../../../IDE/animationEditor/readme.html">
            
                <a href="../../../IDE/animationEditor/readme.html">
            
                    
                    Animation Editor
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.3.1" data-path="../../../IDE/animationEditor/timelineGUI/readme.html">
            
                <a href="../../../IDE/animationEditor/timelineGUI/readme.html">
            
                    
                    timeline GUI
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3.2" data-path="../../../IDE/animationEditor/aniController/readme.html">
            
                <a href="../../../IDE/animationEditor/aniController/readme.html">
            
                    
                    Animation Controller
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3.3" data-path="../../../IDE/animationEditor/aniBake/readme.html">
            
                <a href="../../../IDE/animationEditor/aniBake/readme.html">
            
                    
                    Animation Bake
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.4" data-path="../../../IDE/particleEditor/readme.html">
            
                <a href="../../../IDE/particleEditor/readme.html">
            
                    
                    Particle Editor
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.5" data-path="../../../IDE/materialEditor/readme.html">
            
                <a href="../../../IDE/materialEditor/readme.html">
            
                    
                    Material Editor
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.6" data-path="../../../IDE/ShaderBlueprint/readme.html">
            
                <a href="../../../IDE/ShaderBlueprint/readme.html">
            
                    
                    Shader Blueprint
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.7" data-path="../../../IDE/Component/readme.html">
            
                <a href="../../../IDE/Component/readme.html">
            
                    
                    Component
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.7.1" data-path="../../../IDE/Component/Mesh/readme.html">
            
                <a href="../../../IDE/Component/Mesh/readme.html">
            
                    
                    Mesh
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.7.2" data-path="../../../IDE/Component/Trail/readme.html">
            
                <a href="../../../IDE/Component/Trail/readme.html">
            
                    
                    Trail
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.7.3" data-path="../../../IDE/Component/PixelLine/readme.html">
            
                <a href="../../../IDE/Component/PixelLine/readme.html">
            
                    
                    Pixel Line
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.7.4" data-path="../../../IDE/Component/ReflectionProbe/readme.html">
            
                <a href="../../../IDE/Component/ReflectionProbe/readme.html">
            
                    
                    Reflection Probe
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.7.5" data-path="../../../IDE/Component/VolumetricGI/readme.html">
            
                <a href="../../../IDE/Component/VolumetricGI/readme.html">
            
                    
                    Volumetric GI
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.7.6" data-path="../../../IDE/Component/StaticBatchVolume/readme.html">
            
                <a href="../../../IDE/Component/StaticBatchVolume/readme.html">
            
                    
                    StaticBatchVolume
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.7.7" data-path="../../../IDE/Component/LOD/readme.html">
            
                <a href="../../../IDE/Component/LOD/readme.html">
            
                    
                    LOD Group
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.8" data-path="../../../IDE/prefab/readme.html">
            
                <a href="../../../IDE/prefab/readme.html">
            
                    
                    prefab
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.9" data-path="../../../IDE/layapackage/readme.html">
            
                <a href="../../../IDE/layapackage/readme.html">
            
                    
                    layapackage
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.9.1" data-path="../../../IDE/layapackage/plug-in/readme.html">
            
                <a href="../../../IDE/layapackage/plug-in/readme.html">
            
                    
                    plug-in
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.9.2" data-path="../../../IDE/layapackage/pluginImport/readme.html">
            
                <a href="../../../IDE/layapackage/pluginImport/readme.html">
            
                    
                    Plugin Import
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.9.3" data-path="../../../IDE/layapackage/Layabox/readme.html">
            
                <a href="../../../IDE/layapackage/Layabox/readme.html">
            
                    
                    Official Plugins
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.9.3.1" data-path="../../../IDE/layapackage/Layabox/LOD/readme.html">
            
                <a href="../../../IDE/layapackage/Layabox/LOD/readme.html">
            
                    
                    LOD Reduction Plugin
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" >
            
                <span>
            
                    
                    advanced
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="../../../2D/advanced/readme.html">
            
                <a href="../../../2D/advanced/readme.html">
            
                    
                    Advanced 2D
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1.1" data-path="../../../2D/advanced/useText/readme.html">
            
                <a href="../../../2D/advanced/useText/readme.html">
            
                    
                    use Text
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.1.2" data-path="../../../2D/TiledMap/readme.html">
            
                <a href="../../../2D/TiledMap/readme.html">
            
                    
                    TiledMap
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.1.3" data-path="../../../2D/performanceOptimization/readme.html">
            
                <a href="../../../2D/performanceOptimization/readme.html">
            
                    
                    performance Optimization
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.1.4" data-path="../../../2D/dom/readme.html">
            
                <a href="../../../2D/dom/readme.html">
            
                    
                    DOM
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="../../../3D/advanced/readme.html">
            
                <a href="../../../3D/advanced/readme.html">
            
                    
                    Advanced 3D
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.2.1" data-path="../../../3D/advanced/customShader/readme.html">
            
                <a href="../../../3D/advanced/customShader/readme.html">
            
                    
                    Custom Shader
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2.2" data-path="../../../3D/advanced/PostProcessing/readme.html">
            
                <a href="../../../3D/advanced/PostProcessing/readme.html">
            
                    
                    Post Processing
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2.3" data-path="../../../3D/advanced/CommandBuffer/readme.html">
            
                <a href="../../../3D/advanced/CommandBuffer/readme.html">
            
                    
                    Command Buffer
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2.4" data-path="../../../3D/advanced/performanceOptimization/readme.html">
            
                <a href="../../../3D/advanced/performanceOptimization/readme.html">
            
                    
                    performance Optimization
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2.5" data-path="../../../3D/WebXR/readme.html">
            
                <a href="../../../3D/WebXR/readme.html">
            
                    
                    WebXR
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2.6" data-path="../../../3D/advanced/Unity/readme.html">
            
                <a href="../../../3D/advanced/Unity/readme.html">
            
                    
                    Unity Resource Plugin
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" >
            
                <span>
            
                    
                    Publishing
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="../../../released/generalSetting/readme.html">
            
                <a href="../../../released/generalSetting/readme.html">
            
                    
                    General Setting
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2" data-path="../../../released/web/readme.html">
            
                <a href="../../../released/web/readme.html">
            
                    
                    Web
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.3" data-path="../../../released/miniGame/readme.html">
            
                <a href="../../../released/miniGame/readme.html">
            
                    
                    miniGame
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.3.1" data-path="../../../released/miniGame/wechat/readme.html">
            
                <a href="../../../released/miniGame/wechat/readme.html">
            
                    
                    wechat
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.3.2" data-path="../../../released/miniGame/byteDance/readme.html">
            
                <a href="../../../released/miniGame/byteDance/readme.html">
            
                    
                    tiktok
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.3.3" data-path="../../../released/miniGame/OPPO/readme.html">
            
                <a href="../../../released/miniGame/OPPO/readme.html">
            
                    
                    OPPO
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.3.4" data-path="../../../released/miniGame/vivo/readme.html">
            
                <a href="../../../released/miniGame/vivo/readme.html">
            
                    
                    vivo
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.3.5" data-path="../../../released/miniGame/xiaomi/readme.html">
            
                <a href="../../../released/miniGame/xiaomi/readme.html">
            
                    
                    xiaomi
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.3.6" data-path="../../../released/miniGame/alipaygame/readme.html">
            
                <a href="../../../released/miniGame/alipaygame/readme.html">
            
                    
                    alipaygame
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5.4" data-path="../../../released/native/LayaNative_Introduction/readme.html">
            
                <a href="../../../released/native/LayaNative_Introduction/readme.html">
            
                    
                    Native
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.4.1" data-path="../../../released/native/native_index/readme.html">
            
                <a href="../../../released/native/native_index/readme.html">
            
                    
                    native index
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.4.2" data-path="../../../released/native/build_Tool/readme.html">
            
                <a href="../../../released/native/build_Tool/readme.html">
            
                    
                    build Tool
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.4.3" data-path="../../../released/native/screen_orientation/readme.html">
            
                <a href="../../../released/native/screen_orientation/readme.html">
            
                    
                    screen orientation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.4.4" data-path="../../../released/native/loading_view_new/readme.html">
            
                <a href="../../../released/native/loading_view_new/readme.html">
            
                    
                    Loading View
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.4.5" data-path="../../../released/native/network/readme.html">
            
                <a href="../../../released/native/network/readme.html">
            
                    
                    network
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.4.6" data-path="../../../released/native/LocalStrorage/readme.html">
            
                <a href="../../../released/native/LocalStrorage/readme.html">
            
                    
                    Local Storage
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.4.7" data-path="../../../released/native/Android_BackPress/readme.html">
            
                <a href="../../../released/native/Android_BackPress/readme.html">
            
                    
                    Android BackPress
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.4.8" data-path="../../../released/native/real_device_debugging/readme.html">
            
                <a href="../../../released/native/real_device_debugging/readme.html">
            
                    
                    Debugging JS on Android
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.4.9" data-path="../../../released/native/LayaDcc_Tool/readme.html">
            
                <a href="../../../released/native/LayaDcc_Tool/readme.html">
            
                    
                    LayaDcc Tool
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.4.10" data-path="../../../released/native/Secondary_Development/readme.html">
            
                <a href="../../../released/native/Secondary_Development/readme.html">
            
                    
                    Secondary Development
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.4.11" data-path="../../../released/native/webview/readme.html">
            
                <a href="../../../released/native/webview/readme.html">
            
                    
                    webview
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.4.12" data-path="../../../released/native/built_in_font/readme.html">
            
                <a href="../../../released/native/built_in_font/readme.html">
            
                    
                    Fonts
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.4.13" data-path="../../../released/native/zipUpdate/readme.html">
            
                <a href="../../../released/native/zipUpdate/readme.html">
            
                    
                    zip Update
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.4.14" data-path="../../../released/native/apk_expansion/readme.html">
            
                <a href="../../../released/native/apk_expansion/readme.html">
            
                    
                    APK Expansion
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.4.15" data-path="../../../released/native/build_Cmd/readme.html">
            
                <a href="../../../released/native/build_Cmd/readme.html">
            
                    
                    Command
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.4.16" data-path="../../../released/native/Other_settings/readme.html">
            
                <a href="../../../released/native/Other_settings/readme.html">
            
                    
                    Other
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../../.." >network</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <div id="anchor-navigation-ex-navbar"><i class="fa fa-navicon"></i><ul><li><span class="title-icon "></span><a href="#telecommunication"><b></b>Telecommunication</a></li><ul><li><span class="title-icon "></span><a href="#1-overview"><b></b>1. Overview</a></li><li><span class="title-icon "></span><a href="#2-http-connection"><b></b>2. Http connection</a></li><ul><li><span class="title-icon "></span><a href="#21-layahttprequest"><b></b>2.1 Laya.HttpRequest</a></li><li><span class="title-icon "></span><a href="#22-get"><b></b>2.2 GET</a></li><li><span class="title-icon "></span><a href="#23-post"><b></b>2.3 POST</a></li><li><span class="title-icon "></span><a href="#24-extend-httprequest"><b></b>2.4 Extend HttpRequest</a></li></ul><li><span class="title-icon "></span><a href="#3-websocket-connection"><b></b>3. WebSocket connection</a></li><ul><li><span class="title-icon "></span><a href="#31-layasoccet"><b></b>3.1 Laya.Soccet</a></li><li><span class="title-icon "></span><a href="#32-layabyte-binary-reading-and-writing"><b></b>3.2 Laya.Byte binary reading and writing</a></li></ul><li><span class="title-icon "></span><a href="#4-use-of-protocolbuffer"><b></b>4. Use of ProtocolBuffer</a></li><ul><li><span class="title-icon "></span><a href="#41-message-definition"><b></b>4.1 Message Definition</a></li><li><span class="title-icon "></span><a href="#42-add-protobuf-class-library-to-the-project"><b></b>4.2 Add protobuf class library to the project</a></li><li><span class="title-icon "></span><a href="#43-load-protocol-file"><b></b>4.3 Load protocol file</a></li><li><span class="title-icon "></span><a href="#44-message-method"><b></b>4.4 Message method</a></li><li><span class="title-icon "></span><a href="#45-code-example"><b></b>4.5 Code Example</a></li></ul></ul></ul></div><a href="#telecommunication" id="anchorNavigationExGoTop"><i class="fa fa-arrow-up"></i></a><h1 id="telecommunication"><a name="telecommunication" class="anchor-navigation-ex-anchor" href="#telecommunication"><i class="fa fa-link" aria-hidden="true"></i></a>Telecommunication</h1>
<h2 id="1-overview"><a name="1-overview" class="anchor-navigation-ex-anchor" href="#1-overview"><i class="fa fa-link" aria-hidden="true"></i></a>1. Overview</h2>
<p>During our project development process, apart from the fact that a single machine does not need to use network communication, when developing a network project, it is inevitable to deal with network communication. This chapter will explain the network communication part of LayaAir. Usually we use Http and WebSocket, two network communication methods. First, let&#x2019;s compare the differences between the two:</p>
<ul>
<li><strong>HTTP</strong>&#xFF1A;</li>
</ul>
<p>Advantages: The protocol is mature, widely used, based on TCP/IP, has the reliability of TCP, low R&amp;D cost, rapid development, and is widely supported, such as nginx/apache/tomcat, etc.</p>
<p>Disadvantages: stateless and connectionless, only PULL mode, PUSH is not supported, data packets are large, and all header information must be included in each request.</p>
<p>Features: stateless, connectionless (short connection), supports C/S mode, suitable for text transmission, but can also transmit other types of data, such as pictures, videos, etc.</p>
<ul>
<li><strong>WebSocket</strong>&#xFF1A;</li>
</ul>
<p>Advantages: The protocol is relatively new, but has become mature. It is based on TCP/IP and has the reliability of TCP. The data message is smaller. Only the handshake phase when establishing a connection requires larger header information, and the header information in the subsequent data exchange phase is The information is small, connection-oriented, stateful protocol, and supports the server to actively push data (PUSH mode).</p>
<p>Disadvantages: WebSocket is an application layer protocol. Although the data packets are relatively concise, compared with the TCP/IP protocol, its data packet header information is relatively large. For very small data packets, this may cause some additional traffic consumption. In addition, more server resources may be consumed due to the need to maintain the connection.</p>
<p>Features: Stateful, connection-oriented, small data header, supports full-duplex communication, suitable for applications requiring real-time communication.</p>
<p>Through the above analysis of protocol characteristics, it is recommended that:</p>
<ol>
<li><p>For weak network games, such as elimination games and card games, you can use HTTP protocol directly. If security is considered, use HTTPS directly, or use symmetric encryption on the content body;</p>
</li>
<li><p>For real-time and interactive requirements, and the team has relevant experience, you can give priority to the websocket protocol, such as large online games such as SLG and RPG.</p>
</li>
</ol>
<h2 id="2-http-connection"><a name="2-http-connection" class="anchor-navigation-ex-anchor" href="#2-http-connection"><i class="fa fa-link" aria-hidden="true"></i></a>2. Http connection</h2>
<p>The HTTP protocol, the Hypertext Transfer Protocol, is the basis of Web networking and one of the protocols commonly used in mobile phone networking. The HTTP protocol is an application built on the TCP protocol.</p>
<h3 id="21-layahttprequest"><a name="21-layahttprequest" class="anchor-navigation-ex-anchor" href="#21-layahttprequest"><i class="fa fa-link" aria-hidden="true"></i></a>2.1 Laya.HttpRequest</h3>
<p>In the LayaAir engine, <code>HttpRequest</code> is the basic class for us to send requests. The <code>HttpRequest</code> class actually wraps the native <code>XMLHttpRequest</code>. Let&#x2019;s first understand <code>HttpRequest</code>.</p>
<h4 id="211-native-xmlhttprequest-object"><a name="211-native-xmlhttprequest-object" class="anchor-navigation-ex-anchor" href="#211-native-xmlhttprequest-object"><i class="fa fa-link" aria-hidden="true"></i></a>2.1.1 Native XMLHttpRequest object</h4>
<pre class="language-"><code class="lang-typescript">    <span class="token comment">/**
     * The native XMLHttpRequest reference encapsulated by this object.
     */</span>
    <span class="token keyword">get</span> <span class="token function">http</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">any</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_http<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre>
<p><code>XMLHttpRequest</code> is available through the ._http attribute. <code>XMLHttpRequest</code> in Chinese can be interpreted as extensible hypertext transfer request. It provides the client with the functionality to transfer data between the client and the server. It provides a simple way to get data via a URL without causing the entire page to refresh. This allows the web page to update only part of the page without disturbing the user.</p>
<ol>
<li>Properties</li>
</ol>
<table>
<thead>
<tr>
<th style="text-align:left">Properties</th>
<th style="text-align:left">Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>onreadystatechange</code></td>
<td style="text-align:left"><code>function</code></td>
<td>A JavaScript function object that will be called when the readyState property changes.</td>
</tr>
<tr>
<td style="text-align:left"><code>readyState</code></td>
<td style="text-align:left"><code>unsigned short</code></td>
<td>Five statuses of requests</td>
</tr>
<tr>
<td style="text-align:left"><code>response</code></td>
<td style="text-align:left"><code>varies</code></td>
<td>The type of response entity is specified by responseType, which can be <code>ArrayBuffer</code>, <code>Blob</code>, <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Document" target="_blank"><code>Document</code></a>, JavaScript Object (i.e. &quot;json&quot;), or a string. If the request is incomplete or failed, the value is <code>null</code></td>
</tr>
<tr>
<td style="text-align:left"><code>responseText</code></td>
<td style="text-align:left"><code>DOMString</code></td>
<td>The response to this request is text, or <code>null</code> when the request was unsuccessful or has not yet been sent. Read-only.</td>
</tr>
<tr>
<td style="text-align:left"><code>responseType</code></td>
<td style="text-align:left"><code>XMLHttpRequestResponseType</code></td>
<td>Setting this value changes the response type. Just tell the server the response format you expect.</td>
</tr>
<tr>
<td style="text-align:left"><code>status</code></td>
<td style="text-align:left"><code>unsigned short</code></td>
<td>The response status code for the request (for example, status code 200 indicates a successful request). Read-only</td>
</tr>
<tr>
<td style="text-align:left"><code>statusText</code></td>
<td style="text-align:left"><code>DOMString</code></td>
<td>Response status information for this request, consisting of a status code and reason phrase (such as &quot;<code>200 OK</code>&quot;). Read only</td>
</tr>
<tr>
<td style="text-align:left"><code>upload</code></td>
<td style="text-align:left"><code>XMLHttpRequestUpload</code></td>
<td>You can add an event listener on upload to track the upload process.</td>
</tr>
<tr>
<td style="text-align:left"><code>withCredentials</code></td>
<td style="text-align:left"><code>boolean</code></td>
<td>Indicates whether to use authentication information (such as cookies or authorization headers) when making cross-site Access-Control requests. Defaults to <code>false</code></td>
</tr>
<tr>
<td style="text-align:left"><code>timeout</code></td>
<td style="text-align:left"><code>number</code></td>
<td>Request timeout</td>
</tr>
</tbody>
</table>
<ol>
<li>Method</li>
</ol>
<p><code>abort()</code></p>
<p>If the request has already been sent, the request is aborted immediately.</p>
<p><code>getAllResponseHeaders()</code></p>
<p>Returns all response header information (response header name and value), or <code>null</code> if the response header has not been accepted.</p>
<p><code>getResponseHeader()</code></p>
<p>Returns the value of the specified response header. If the response header has not been accepted or the response header does not exist, null is returned.</p>
<p><code>open()</code></p>
<p>Initialize a request.</p>
<p><code>send()</code></p>
<p>Send the request. If the request is in asynchronous mode (default), this method will return immediately. In contrast, if the request is in synchronous mode, the method will not return until the response to the request has been fully accepted.</p>
<p><code>setRequestHeader()</code></p>
<p>Assign a value to the specified HTTP request header. Before doing this, you must confirm that you have opened a URL by calling the <code>open()</code> method.</p>
<p>Therefore, in the process of using <code>HttpRequest</code>, we can also obtain the <code>XMLHttpRequest</code> object and perform related operations on the <code>XMLHttpRequest</code> object. We will not explain too much about <code>XMLHttpRequest</code> here. Developers can check the relevant documents by themselves.</p>
<ul>
<li><p>For detailed information on <code>XMLHttpRequest</code>, please see <a href="https://www.w3.org/TR/XMLHttpRequest/" target="_blank">W3C&apos;s xhr standard</a>;</p>
</li>
<li><p><code>XMLHttpRequest</code> sends various types of data, you can refer to <a href="https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/Sending_and_Receiving_Binary_Data" target="_blank">Sending Data</a> and <a href="http://www.html5rocks.com/zh/tutorials/file/xhr2/" target="_blank">this article on html5rocks </a></p>
</li>
<li><p>To understand the basic use of <code>XMLHttpRequest</code>, you can refer to <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequest" target="_blank">MDN&apos;s Introduction to XMLHttpRequest</a>;</p>
</li>
<li><p>If you want to know about cross-domain requests, you can refer to <a href="https://www.w3.org/TR/cors/" target="_blank">W3C&apos;s cors standard</a>;</p>
</li>
</ul>
<h4 id="212-send-method"><a name="212-send-method" class="anchor-navigation-ex-anchor" href="#212-send-method"><i class="fa fa-link" aria-hidden="true"></i></a>2.1.2 send() method</h4>
<p>Send a request. Usually the request is sent asynchronously, and the parameter types of send are as follows:</p>
<pre class="language-"><code class="lang-typescript">    <span class="token comment">/**
     * Send HTTP request.
     * @param url                  The requested address. Most browsers implement a Same Origin Security Policy and require that the URL have the same hostname and port as the text containing the script.
     * @param data                  (default = null)The data sent.
     * @param    method            (default = &quot;get&quot;)The HTTP method used for the request. Values &#x200B;&#x200B;include &quot;get&quot;, &quot;post&quot;, &quot;head&quot;.
     * @param responseType          (default = &quot;text&quot;) The response type of the web server, which can be set to &quot;text&quot;, &quot;json&quot;, &quot;xml&quot;, &quot;arraybuffer&quot;.
     * @param    headers            (default = null) HTTP request header information. The parameters are in the form of a key-value array: key is the name of the header and should not include blanks, colons or newlines; value is the value of the header and should not include newlines. For example [&quot;Content-Type&quot;, &quot;application/json&quot;].
     */</span>
    <span class="token function">send</span><span class="token punctuation">(</span>url<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> data<span class="token operator">:</span> <span class="token builtin">any</span> <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
        method<span class="token operator">:</span> <span class="token string">&quot;get&quot;</span> <span class="token operator">|</span> <span class="token string">&quot;post&quot;</span> <span class="token operator">|</span> <span class="token string">&quot;head&quot;</span> <span class="token operator">=</span> <span class="token string">&quot;get&quot;</span><span class="token punctuation">,</span>
        responseType<span class="token operator">:</span> <span class="token string">&quot;text&quot;</span> <span class="token operator">|</span> <span class="token string">&quot;json&quot;</span> <span class="token operator">|</span> <span class="token string">&quot;xml&quot;</span> <span class="token operator">|</span> <span class="token string">&quot;arraybuffer&quot;</span> <span class="token operator">=</span> <span class="token string">&quot;text&quot;</span><span class="token punctuation">,</span>
        headers<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">|</span> <span class="token keyword">null</span> <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
</code></pre>
<h4 id="213-supported-event-types"><a name="213-supported-event-types" class="anchor-navigation-ex-anchor" href="#213-supported-event-types"><i class="fa fa-link" aria-hidden="true"></i></a>2.1.3 Supported event types</h4>
<p>The basic ones we commonly use are progress events, completion events, error events, etc.</p>
<pre class="language-"><code class="lang-typescript"><span class="token comment">/**
 * Dispatched when the request progress changes.
 * @eventType Event.PROGRESS
 * */</span>
<span class="token comment">/*[Event(name = &quot;progress&quot;, type = &quot;laya.events.Event&quot;)]*/</span>
<span class="token comment">/**
 * Dispatched after the request is completed.
 * @eventType Event.COMPLETE
 * */</span>
<span class="token comment">/*[Event(name = &quot;complete&quot;, type = &quot;laya.events.Event&quot;)]*/</span>
<span class="token comment">/**
 * Dispatched when request error occurs.
 * @eventType Event.ERROR
 * */</span>
<span class="token comment">/*[Event(name = &quot;error&quot;, type = &quot;laya.events.Event&quot;)]*/</span>
</code></pre>
<h4 id="214-how-to-use-it-in-code"><a name="214-how-to-use-it-in-code" class="anchor-navigation-ex-anchor" href="#214-how-to-use-it-in-code"><i class="fa fa-link" aria-hidden="true"></i></a>2.1.4 How to use it in code</h4>
<p>The <code>HttpRequest</code> used in the LayaAir engine inherits the <code>EventDispatcher</code>, which has the function of event dispatching. In addition, it has the function of sending requests. Let&apos;s write a simple example to see how to use it:</p>
<pre class="language-"><code class="lang-typescript"><span class="token keyword">class</span> <span class="token class-name">LayaSample</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token comment">//Create HttpRequest object</span>
        <span class="token keyword">let</span> http<span class="token operator">:</span> Laya<span class="token punctuation">.</span>HttpRequest <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Laya</span><span class="token punctuation">.</span><span class="token function">HttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//Set the timeout</span>
        http<span class="token punctuation">.</span>http<span class="token punctuation">.</span>timeout <span class="token operator">=</span> <span class="token number">10000</span><span class="token punctuation">;</span>
        <span class="token comment">//Sent a simple request</span>
        http<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&quot;resources/data.txt&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;get&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;text&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//You need to create a new data.txt file in the resources folder</span>
        <span class="token comment">//Set the completion event and add a callback method</span>
        http<span class="token punctuation">.</span><span class="token function">once</span><span class="token punctuation">(</span>Laya<span class="token punctuation">.</span>Event<span class="token punctuation">.</span><span class="token constant">COMPLETE</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>completeHandler<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//Set error event and add callback method     </span>
        http<span class="token punctuation">.</span><span class="token function">once</span><span class="token punctuation">(</span>Laya<span class="token punctuation">.</span>Event<span class="token punctuation">.</span><span class="token constant">ERROR</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>errorHandler<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//Set progress events and add callback methods     </span>
        http<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span>Laya<span class="token punctuation">.</span>Event<span class="token punctuation">.</span><span class="token constant">PROGRESS</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>processHandler<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token function">processHandler</span><span class="token punctuation">(</span>data<span class="token operator">:</span><span class="token builtin">any</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;processHandler&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token function">errorHandler</span><span class="token punctuation">(</span>error<span class="token operator">:</span><span class="token builtin">any</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;errorHandler&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token function">completeHandler</span><span class="token punctuation">(</span>data<span class="token operator">:</span><span class="token builtin">any</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;completeHandler&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">new</span> <span class="token class-name">LayaSample</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h3 id="22-get"><a name="22-get" class="anchor-navigation-ex-anchor" href="#22-get"><i class="fa fa-link" aria-hidden="true"></i></a>2.2 GET</h3>
<p>In the above example, we sent a simple request using the get method. Used to obtain a remote file in text format. If we dynamically request remote data, it can be changed to the following format:</p>
<pre class="language-"><code class="lang-typescript"><span class="token keyword">this</span><span class="token punctuation">.</span>hr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>hr<span class="token punctuation">.</span><span class="token function">once</span><span class="token punctuation">(</span>Event<span class="token punctuation">.</span><span class="token constant">PROGRESS</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>onHttpRequestProgress<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>hr<span class="token punctuation">.</span><span class="token function">once</span><span class="token punctuation">(</span>Event<span class="token punctuation">.</span><span class="token constant">COMPLETE</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>onHttpRequestComplete<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>hr<span class="token punctuation">.</span><span class="token function">once</span><span class="token punctuation">(</span>Event<span class="token punctuation">.</span><span class="token constant">ERROR</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>onHttpRequestError<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//Sent a get request with the parameters name=myname and psword=xxx</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>hr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&apos;http://xkxz.zhonghao.huo.inner.layabox.com/&apos;</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token string">&apos;get&apos;</span><span class="token punctuation">,</span> <span class="token string">&apos;text&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>The focus here is the send method, which should be distinguished from the send of <code>XMLHttpRequest</code>.</p>
<h3 id="23-post"><a name="23-post" class="anchor-navigation-ex-anchor" href="#23-post"><i class="fa fa-link" aria-hidden="true"></i></a>2.3 POST</h3>
<p>The following method of requesting a data using the post method is as follows:</p>
<pre class="language-"><code class="lang-typescript"><span class="token keyword">this</span><span class="token punctuation">.</span>hr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>hr<span class="token punctuation">.</span><span class="token function">once</span><span class="token punctuation">(</span>Event<span class="token punctuation">.</span><span class="token constant">PROGRESS</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>onHttpRequestProgress<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>hr<span class="token punctuation">.</span><span class="token function">once</span><span class="token punctuation">(</span>Event<span class="token punctuation">.</span><span class="token constant">COMPLETE</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>onHttpRequestComplete<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>hr<span class="token punctuation">.</span><span class="token function">once</span><span class="token punctuation">(</span>Event<span class="token punctuation">.</span><span class="token constant">ERROR</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>onHttpRequestError<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//Sent a post request with the parameters name=myname and psword=xxx</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>hr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&apos;http://xkxz.zhonghao.huo.inner.layabox.com/&apos;</span><span class="token punctuation">,</span> <span class="token string">&apos;name=myname&amp;psword=xxx&apos;</span><span class="token punctuation">,</span> <span class="token string">&apos;post&apos;</span><span class="token punctuation">,</span> <span class="token string">&apos;text&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p><strong>Note: There is a difference between GET and POST requests:</strong></p>
<p><em>GET request parameters are passed through the URL, and POST request parameters are included in the request body.</em></p>
<p><em>GET requests are less secure than POST requests because the parameters are exposed directly in the URL, so GET requests cannot be used to pass sensitive information.</em></p>
<p><em>The parameters passed in the url of the GET request are limited in length (there is no limit on the length of the URL in the HTTP protocol. The limit is the limit imposed by the specific browser and server. Different browsers have different length limits). POST has no limit on length.</em></p>
<p><em>GET request parameters will be completely retained in the browser&apos;s history, and POST request parameters will not be retained.</em></p>
<p><em>GET requests are URL encoded (percent encoding), and POST requests support multiple encoding methods.</em></p>
<h3 id="24-extend-httprequest"><a name="24-extend-httprequest" class="anchor-navigation-ex-anchor" href="#24-extend-httprequest"><i class="fa fa-link" aria-hidden="true"></i></a>2.4 Extend HttpRequest</h3>
<p>During the development process, <code>HttpRequest</code> may not meet our needs, such as uploading files, setting timeouts, operating form data, etc. Extending <code>HttpRequest</code> is very simple. You can inherit <code>HttpRequest</code> or simply rewrite the <code>HttpRequest</code> class yourself. This depends on the needs of the developer. It is recommended to directly inherit <code>EventDispatcher</code> when rewriting <code>HttpRequest</code>. Rewriting is to repackage the <code>XMLHttpRequest</code> class. Here is a simple demonstration of inheritance:</p>
<pre class="language-"><code class="lang-typescript"> <span class="token keyword">class</span> <span class="token class-name">HttpRequestExtension</span> <span class="token keyword">extends</span> <span class="token class-name">Laya</span><span class="token punctuation">.</span>HttpRequest <span class="token punctuation">{</span>
     <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
         <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span>
     <span class="token keyword">public</span> <span class="token function">send</span><span class="token punctuation">(</span>url<span class="token operator">:</span><span class="token builtin">string</span><span class="token punctuation">,</span>data<span class="token operator">:</span><span class="token builtin">any</span><span class="token operator">=</span><span class="token keyword">null</span><span class="token punctuation">,</span>method<span class="token operator">:</span><span class="token builtin">string</span><span class="token operator">=</span><span class="token string">&quot;get&quot;</span><span class="token punctuation">,</span> responseType<span class="token operator">:</span><span class="token builtin">string</span><span class="token operator">=</span><span class="token string">&quot;text&quot;</span><span class="token punctuation">,</span> headers<span class="token operator">:</span><span class="token builtin">any</span><span class="token operator">=</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token keyword">void</span><span class="token punctuation">{</span>
         <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span>data<span class="token punctuation">,</span>method<span class="token punctuation">,</span>responseType<span class="token punctuation">,</span>headers<span class="token punctuation">)</span><span class="token punctuation">;</span>
             <span class="token keyword">this</span><span class="token punctuation">.</span>_http<span class="token punctuation">.</span>upload<span class="token punctuation">.</span><span class="token function-variable function">onprogress</span><span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>e<span class="token operator">:</span><span class="token builtin">any</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token keyword">void</span>
             <span class="token punctuation">{</span>
                 <span class="token comment">//upload progress</span>
             <span class="token punctuation">}</span>
             <span class="token keyword">this</span><span class="token punctuation">.</span>_http<span class="token punctuation">.</span>upload<span class="token punctuation">.</span><span class="token function-variable function">onload</span><span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>e<span class="token operator">:</span><span class="token builtin">any</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token keyword">void</span>
             <span class="token punctuation">{</span>
             <span class="token punctuation">}</span>
             <span class="token keyword">this</span><span class="token punctuation">.</span>_http<span class="token punctuation">.</span>upload<span class="token punctuation">.</span><span class="token function-variable function">onerror</span><span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>e<span class="token operator">:</span><span class="token builtin">any</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token keyword">void</span>
             <span class="token punctuation">{</span>
             <span class="token punctuation">}</span>
             <span class="token keyword">this</span><span class="token punctuation">.</span>_http<span class="token punctuation">.</span>upload<span class="token punctuation">.</span><span class="token function-variable function">onabort</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>e<span class="token operator">:</span><span class="token builtin">any</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token keyword">void</span>
             <span class="token punctuation">{</span>
             <span class="token punctuation">}</span>
     <span class="token punctuation">}</span>
 <span class="token punctuation">}</span>
</code></pre>
<p>The above is a demonstration of uploading files, adding some upload events of <code>XMLHttpRequest</code>. The super.send here simply uses the method of the parent class. Developers can not use it and write another one to meet their own needs.</p>
<h2 id="3-websocket-connection"><a name="3-websocket-connection" class="anchor-navigation-ex-anchor" href="#3-websocket-connection"><i class="fa fa-link" aria-hidden="true"></i></a>3. WebSocket connection</h2>
<p>WebSocket is a technology based on the ws protocol, which makes it possible to establish a full-duplex connection. Websocket is commonly used in browsers, but this protocol is not restricted by the platform it is used on.</p>
<p>The format of data sent by websocket is generally binary and string. The LayaAir engine has encapsulated the Socket and Byte classes for us, and sending and receiving data can be completed by combining the Byte class.</p>
<h3 id="31-layasoccet"><a name="31-layasoccet" class="anchor-navigation-ex-anchor" href="#31-layasoccet"><i class="fa fa-link" aria-hidden="true"></i></a>3.1 Laya.Soccet</h3>
<p>In the LayaAir engine, <code>Socket</code> is the basic class we use WebSocket. <code>Socket</code> encapsulates HTML5 WebSocket, allowing full-duplex real-time communication between the server and the client, and allowing cross-domain communication. After establishing a connection, both the server and the Browser/Client Agent can actively send or receive text and binary data to each other. Let&#x2019;s first understand the usage of <code>Socket</code></p>
<h4 id="311-connect-server"><a name="311-connect-server" class="anchor-navigation-ex-anchor" href="#311-connect-server"><i class="fa fa-link" aria-hidden="true"></i></a>3.1.1 Connect server</h4>
<p>There are three ways to connect to the server through Socket:</p>
<table>
<thead>
<tr>
<th style="text-align:left">way</th>
<th style="text-align:left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">Constructor parameter passing</td>
<td style="text-align:left">Connect immediately, such as new Socket(&quot;192.168.1.2&quot;,8899); note that the host parameter here does not have the ws prefix.</td>
</tr>
<tr>
<td style="text-align:left">connect method</td>
<td style="text-align:left">Pass the url and port number to connect to the server; socket.connect(&quot;192.168.0.1.2&quot;, 8989); note that the host parameter here does not have the ws prefix.</td>
</tr>
<tr>
<td style="text-align:left">connectByUrl method</td>
<td style="text-align:left">Pass the entire url, such as socket.connectByUrl(&quot;ws://localhost:8989&quot;); there is the ws prefix here.</td>
</tr>
</tbody>
</table>
<h4 id="312-send-data"><a name="312-send-data" class="anchor-navigation-ex-anchor" href="#312-send-data"><i class="fa fa-link" aria-hidden="true"></i></a>3.1.2 Send data</h4>
<p>Sending data is very simple. You only need to call the send function of Socket. The parameter can be string or ArrayBuffer.</p>
<ul>
<li><strong>Sending string format:</strong></li>
</ul>
<pre class="language-"><code>this.socket.send(&quot;hello world&quot;);//This is the form of sending a string.
</code></pre><ul>
<li><strong>Send data in binary format:</strong></li>
</ul>
<pre class="language-"><code class="lang-typescript"><span class="token comment">//Write a byte</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>byte<span class="token punctuation">.</span><span class="token function">writeByte</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//Write an int16 data</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>byte<span class="token punctuation">.</span><span class="token function">writeInt16</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//Write a 32-bit floating point data</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>byte<span class="token punctuation">.</span><span class="token function">writeFloat32</span><span class="token punctuation">(</span><span class="token number">20.5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//Write a string;</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>byte<span class="token punctuation">.</span><span class="token function">writeUTFString</span><span class="token punctuation">(</span><span class="token string">&quot;hello&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//Declare a temporary Byte type here</span>
<span class="token keyword">var</span> by<span class="token operator">:</span>Laya<span class="token punctuation">.</span>Byte <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Laya</span><span class="token punctuation">.</span><span class="token function">Byte</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//Set endian;</span>
by<span class="token punctuation">.</span>endian <span class="token operator">=</span> Laya<span class="token punctuation">.</span>Byte<span class="token punctuation">.</span><span class="token constant">LITTLE_ENDIAN</span><span class="token punctuation">;</span>
<span class="token comment">//Write an int32 data</span>
by<span class="token punctuation">.</span><span class="token function">writeInt32</span><span class="token punctuation">(</span><span class="token number">5000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//Write a uint16 data</span>
by<span class="token punctuation">.</span><span class="token function">writeUint16</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//Write the temporary byte data into byte. Note here that by.buffer is written;</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>byte<span class="token punctuation">.</span><span class="token function">writeArrayBuffer</span><span class="token punctuation">(</span>by<span class="token punctuation">.</span>buffer<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//Here, the byte array data is sent to the server through the socket.</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>socket<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>byte<span class="token punctuation">.</span>buffer<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//Clear the data; make it easier to read and write next time;</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>byte<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>We saw above that the data we need is read into a Byte array through a byte array, and what is finally sent to the server is <code>byte.buffer</code>, which is an ArrayBuffer data type. It must be noted here that the parameter of send is ArrayBuffer. Many developers may not pay attention and directly pass it into Byte, resulting in incorrect data being sent. If it is written as <code>this.socket.send(this.byte)</code>; this is wrong, so you must pay attention to this.</p>
<h4 id="313-receive-data"><a name="313-receive-data" class="anchor-navigation-ex-anchor" href="#313-receive-data"><i class="fa fa-link" aria-hidden="true"></i></a>3.1.3 Receive data</h4>
<p>The data received by the client from the server will be dispatched to the Event.MESSAGE listening function. The parameter of receiveHandler is the data sent back by the server. It may be a string or a binary ArrayBuffer. We don&apos;t need to read the received string, we can just use it directly. But if what is received is binary, we need to read it and convert it into the type we need.</p>
<pre class="language-"><code class="lang-typescript"> <span class="token keyword">private</span> <span class="token function">receiveHandler</span><span class="token punctuation">(</span>msg<span class="token operator">:</span> <span class="token builtin">any</span> <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
   <span class="token comment">///Receive data trigger function</span>
   <span class="token comment">//.............Here we assume that what is received is a binary ArrayBuffer</span>
   <span class="token keyword">this</span><span class="token punctuation">.</span>byte<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token keyword">this</span><span class="token punctuation">.</span>byte<span class="token punctuation">.</span><span class="token function">writeArrayBuffer</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//Read the received binary data into a byte array for easy analysis.</span>
   <span class="token keyword">this</span><span class="token punctuation">.</span>byte<span class="token punctuation">.</span>pos <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token comment">//Set offset pointer;</span>
   <span class="token comment">////Start reading the data below. Read the data in order according to the data passed by the server.</span>
   <span class="token keyword">var</span> a<span class="token operator">:</span><span class="token builtin">number</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>byte<span class="token punctuation">.</span><span class="token function">getByte</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token keyword">var</span> b<span class="token operator">:</span><span class="token builtin">number</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>byte<span class="token punctuation">.</span><span class="token function">getInt16</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token keyword">var</span> c<span class="token operator">:</span><span class="token builtin">number</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>byte<span class="token punctuation">.</span><span class="token function">getFloat32</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token keyword">var</span> d<span class="token operator">:</span><span class="token builtin">string</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>byte<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token keyword">var</span> e<span class="token operator">:</span><span class="token builtin">string</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>byte<span class="token punctuation">.</span><span class="token function">getUTFString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
</code></pre>
<h4 id="314-supported-event-types"><a name="314-supported-event-types" class="anchor-navigation-ex-anchor" href="#314-supported-event-types"><i class="fa fa-link" aria-hidden="true"></i></a>3.1.4 Supported event types</h4>
<p>What we commonly use is basically that the connection is successfully established, data is received, the connection is closed, scheduling after an exception occurs, etc.</p>
<pre class="language-"><code class="lang-typescript"><span class="token comment">/**
 * Scheduled after the connection is successfully established.
 * @eventType Event.OPEN
 * */</span>
<span class="token comment">/*[Event(name = &quot;open&quot;, type = &quot;laya.events.Event&quot;)]*/</span>
<span class="token comment">/**
 * Scheduled after receiving data.
 * @eventType Event.MESSAGE
 * */</span>
<span class="token comment">/*[Event(name = &quot;message&quot;, type = &quot;laya.events.Event&quot;)]*/</span>
<span class="token comment">/**
 * Dispatched after the connection is closed.
 * @eventType Event.CLOSE
 * */</span>
<span class="token comment">/*[Event(name = &quot;close&quot;, type = &quot;laya.events.Event&quot;)]*/</span>
<span class="token comment">/**
 * Scheduling after an exception occurs.
 * @eventType Event.ERROR
 * */</span>
<span class="token comment">/*[Event(name = &quot;error&quot;, type = &quot;laya.events.Event&quot;)]*/</span>
</code></pre>
<h4 id="315-how-to-use-it-in-code"><a name="315-how-to-use-it-in-code" class="anchor-navigation-ex-anchor" href="#315-how-to-use-it-in-code"><i class="fa fa-link" aria-hidden="true"></i></a>3.1.5 How to use it in code</h4>
<p>Let&#x2019;s give a simple WebSocket code example for sending and receiving data:</p>
<pre class="language-"><code class="lang-typescript">    <span class="token keyword">private</span> <span class="token function">connect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>

        <span class="token comment">//Create Socket object</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>socket <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Socket</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//Establish a connection to the server</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>socket<span class="token punctuation">.</span><span class="token function">connectByUrl</span><span class="token punctuation">(</span><span class="token string">&quot;ws://echo.websocket.org:80&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//Indicates the data in the buffer that needs to be sent to the server</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>output <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>socket<span class="token punctuation">.</span>output<span class="token punctuation">;</span>

        <span class="token comment">//Add listening event</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>socket<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span>Event<span class="token punctuation">.</span><span class="token constant">OPEN</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>onSocketOpen<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>socket<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span>Event<span class="token punctuation">.</span><span class="token constant">CLOSE</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>onSocketClose<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>socket<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span>Event<span class="token punctuation">.</span><span class="token constant">MESSAGE</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>onMessageReveived<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>socket<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span>Event<span class="token punctuation">.</span><span class="token constant">ERROR</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>onConnectError<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//Connection established successfully callback</span>
    <span class="token keyword">private</span> <span class="token function">onSocketOpen</span><span class="token punctuation">(</span>e<span class="token operator">:</span> <span class="token builtin">any</span> <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Connected&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// send string</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>socket<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&quot;demonstrate &lt;sendString&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//Send using output.writeByte</span>
        <span class="token keyword">var</span> message<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">&quot;demonstrate &lt;output.writeByte&gt;&quot;</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> message<span class="token punctuation">.</span>length<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// Directly write data in the buffer</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>output<span class="token punctuation">.</span><span class="token function">writeByte</span><span class="token punctuation">(</span>message<span class="token punctuation">.</span><span class="token function">charCodeAt</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">//Send the data in the buffer to the server</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>socket<span class="token punctuation">.</span><span class="token function">flush</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//Event callback after the connection is disconnected</span>
    <span class="token keyword">private</span> <span class="token function">onSocketClose</span><span class="token punctuation">(</span>e<span class="token operator">:</span> <span class="token builtin">any</span> <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Socket closed&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//Event callback when data is received</span>
    <span class="token keyword">private</span> <span class="token function">onMessageReveived</span><span class="token punctuation">(</span>message<span class="token operator">:</span> <span class="token builtin">any</span> <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Message from server:&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> <span class="token punctuation">(</span>message<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">&apos;string&apos;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>message <span class="token keyword">instanceof</span> <span class="token class-name">ArrayBuffer</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Byte</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">readUTFBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// Clear cached data sent from the server</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>socket<span class="token punctuation">.</span>input<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//Event callback after exception occurs</span>
    <span class="token keyword">private</span> <span class="token function">onConnectError</span><span class="token punctuation">(</span>e<span class="token operator">:</span> Event <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;error&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre>
<h3 id="32-layabyte-binary-reading-and-writing"><a name="32-layabyte-binary-reading-and-writing" class="anchor-navigation-ex-anchor" href="#32-layabyte-binary-reading-and-writing"><i class="fa fa-link" aria-hidden="true"></i></a>3.2 Laya.Byte binary reading and writing</h3>
<p>In development projects, binary operations are indispensable. In the HTML5 era, binary support has made great breakthroughs. However, the API is cumbersome and inconvenient for developers to develop projects. In the era of web games, the binary array ByteArray of ActionScript 3.0 has complete functions and the API operation is simple and easy to understand. Therefore, LayaAir&apos;s Byte takes over the characteristics of HTML5&apos;s TypedArray while referring to ByteArray. Let&#x2019;s take a look at the main uses</p>
<h4 id="321-common-methods"><a name="321-common-methods" class="anchor-navigation-ex-anchor" href="#321-common-methods"><i class="fa fa-link" aria-hidden="true"></i></a>3.2.1 Common methods</h4>
<ul>
<li><p><strong>Construction method</strong></p>
<p>parameter:</p>
<p><code>length</code>: length</p>
<p>When the length parameter is passed in, an internal array buffer is created, the size of the buffer is the length size passed in.</p>
<p><code>typedArray</code>: typed array</p>
<p>When an arbitrary typed array object (typedArray) containing elements of any type (such as <strong>Int32Array)</strong> is passed as a parameter, typeArray is copied to a new typed array. Each value in typeArray is converted according to the constructor before being copied to the new array. The newly generated typed array object will have the same length as the passed array (for example, if the original typeArray.length==2, then the length of the newly generated array is also 2, but each item in the array has been converted. ).</p>
<p><code>ArrayBuffer</code>: Binary data buffer.</p>
<p>The above three methods can instantiate a Byte and create binary data according to different parameters.</p>
<pre class="language-"><code class="lang-typescript"><span class="token comment">//Instantiate a binary array Byte</span>
<span class="token keyword">var</span> byte<span class="token operator">:</span>Laya<span class="token punctuation">.</span>Byte <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Laya</span><span class="token punctuation">.</span><span class="token function">Byte</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//Or pass in a typed array</span>
<span class="token keyword">var</span> uint8Byte<span class="token operator">:</span>Uint8Array <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Uint8Array</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> byte<span class="token operator">:</span>Laya<span class="token punctuation">.</span>Byte <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Laya</span><span class="token punctuation">.</span><span class="token function">Byte</span><span class="token punctuation">(</span>uint8Byte<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//Or pass in an ArrayBuffer type</span>
<span class="token class-name"><span class="token keyword">var</span></span> buffer<span class="token operator">:</span>ArrayBuffer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayBuffer</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> byte<span class="token operator">:</span>Laya<span class="token punctuation">.</span>Byte <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Laya</span><span class="token punctuation">.</span><span class="token function">Byte</span><span class="token punctuation">(</span>buffer<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
</li>
<li><p><strong>writeArrayBuffer</strong>(arraybuffer:*, offset:number = 0, length:number = 0):void</p>
<p>Writes the specified binary buffer data. Specify the offset and length of the data, as follows:</p>
<pre class="language-"><code class="lang-typescript"><span class="token keyword">var</span> byte<span class="token operator">:</span>Laya<span class="token punctuation">.</span>Byte <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Laya</span><span class="token punctuation">.</span><span class="token function">Byte</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> byte1<span class="token operator">:</span>Laya<span class="token punctuation">.</span>Byte <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Laya</span><span class="token punctuation">.</span><span class="token function">Byte</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
byte1<span class="token punctuation">.</span><span class="token function">writeFloat32</span><span class="token punctuation">(</span><span class="token number">20.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//Write a four-byte floating point number</span>
byte1<span class="token punctuation">.</span><span class="token function">writeInt16</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//Write a two-byte integer</span>
byte1<span class="token punctuation">.</span><span class="token function">writeUTFString</span><span class="token punctuation">(</span><span class="token string">&quot;hell world&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//Write a string;</span>
byte<span class="token punctuation">.</span><span class="token function">writeArrayBuffer</span><span class="token punctuation">(</span>byte1<span class="token punctuation">.</span>buffer<span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//Read the data of byte1 into byte starting from the sixth byte. Omit the floating point number 20.0 and the integer 16</span>
byte<span class="token punctuation">.</span>pos <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token comment">//</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>byte<span class="token punctuation">.</span><span class="token function">readUTFString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">//Read the string from byte.</span>
</code></pre>
</li>
<li><p><strong>Read data</strong></p>
<p><code>getByte():number</code></p>
<p>Read signed bytes from a byte stream.</p>
<p><code>getInt16():number</code></p>
<p>Reads an Int16 value from the byte stream at the current byte offset.</p>
<p><code>getInt32():number</code></p>
<p>Reads an Int32 value from the byte stream at the current byte offset.</p>
<p><code>getFloat32():number</code></p>
<p>Reads an IEEE 754 single-precision (32-bit) floating-point number from the byte stream at the current byte offset.</p>
<p><code>getFloat32Array(start:number, len:number)any</code></p>
<p>Reads the specified length of data from the specified location to create a Float32Array object and returns this object.</p>
<p><code>getFloat64():number</code></p>
<p>Reads an IEEE 754 double-precision (64-bit) floating-point number from the byte stream at the current byte offset.</p>
<p><code>getInt16():number</code></p>
<p>Reads an Int16 value from the byte stream at the current byte offset.</p>
<p><code>getInt32():number</code></p>
<p>Reads an Int32 value from the byte stream at the current byte offset.</p>
<p><code>getUint8():number</code></p>
<p>Reads a Uint8 value from the byte stream at the current byte offset.</p>
<p><code>getUint16():number</code></p>
<p>Reads a Uint16 value from the byte stream at the current byte offset.</p>
<p><code>getUint32():number</code></p>
<p>Reads a Uint32 value from the byte stream at the current byte offset.</p>
<p><code>getInt16Array(start:number, len:number):any</code></p>
<p>Reads data of the specified length from the specified location to create an Int16Array object and returns this object.</p>
<p><code>getString():string</code></p>
<p>Read character value.</p>
<p><code>getUTFBytes(len:number = -1):string</code></p>
<p>The read string must be the string written by the writeUTFBytes method.</p>
<p><code>getUTFString():string</code></p>
<p>Read UTF-8 string.</p>
</li>
</ul>
<ul>
<li><p><strong>data input</strong></p>
<p><code>writeByte(value:number):void</code> writes a byte in the byte stream.</p>
</li>
</ul>
<pre class="language-"><code class="lang-typescript"> <span class="token keyword">var</span> byte<span class="token operator">:</span>Laya<span class="token punctuation">.</span>Byte <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Laya</span><span class="token punctuation">.</span><span class="token function">Byte</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 byte<span class="token punctuation">.</span><span class="token function">writeByte</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//between 0-255</span>
</code></pre>
<p> <code>writeFloat32(value:number):void</code> writes a Float32 value at the current byte offset. The range is $\left[-2^{128}, 2^{127}\right]$, which is approximately -3.4E38&#x2014;3.4E+38.</p>
<pre class="language-"><code class="lang-typescript"><span class="token keyword">var</span> byte<span class="token operator">:</span>Laya<span class="token punctuation">.</span>Byte <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Laya</span><span class="token punctuation">.</span><span class="token function">Byte</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
byte<span class="token punctuation">.</span><span class="token function">writeFloat32</span><span class="token punctuation">(</span><span class="token number">10.021</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p> <code>writeFloat64(value:number):void</code> writes a float64-bit value. The value range is -1.7E308~1.7E+308.</p>
<p> <code>writeInt16(value:number):void</code> writes an Int16 value at the current byte offset. The range is -32768 to +32767.</p>
<pre class="language-"><code class="lang-typescript"><span class="token keyword">var</span> byte<span class="token operator">:</span>Laya<span class="token punctuation">.</span>Byte <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Laya</span><span class="token punctuation">.</span><span class="token function">Byte</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
byte<span class="token punctuation">.</span><span class="token function">writeInt16</span><span class="token punctuation">(</span><span class="token number">120</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p> <code>writeInt32(value:number):void</code> writes an Int32 value at the current byte offset. A signed integer between -2,147,483,648 and +2,147,483,647.</p>
<pre class="language-"><code class="lang-typescript"> <span class="token operator">**</span>writeUint16<span class="token operator">**</span><span class="token punctuation">(</span>value<span class="token operator">:</span><span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token keyword">void</span> writes a Uint16 value at the current byte offset<span class="token punctuation">.</span>
</code></pre>
<p> <code>writeUint32(value:number):void</code> writes a Uint32 value at the current byte offset.</p>
<p> <code>writeUint8(value:number):void</code> writes a Uint8 value at the current byte offset.</p>
<p> <code>writeUTFBytes(value:string):void</code> writes a string. The string written by this method must be read using the readUTFBytes method.</p>
<p> <code>writeUTFString(value:string):void</code> writes a UTF-8 string to the byte stream.</p>
<ul>
<li><p><code>clear():void</code> clears data.</p>
<pre class="language-"><code class="lang-typescript"><span class="token keyword">var</span> byte<span class="token operator">:</span>Laya<span class="token punctuation">.</span>Byte <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Laya</span><span class="token punctuation">.</span><span class="token function">Byte</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
byte<span class="token punctuation">.</span><span class="token function">writeInt16</span><span class="token punctuation">(</span><span class="token number">120</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
byte<span class="token punctuation">.</span>pos <span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token comment">//Return the reading position to zero.</span>
</code></pre>
</li>
</ul>
<ul>
<li><p><code>getSystemEndian():string[static]</code> Gets the byte storage order of the system.</p>
<pre class="language-"><code class="lang-typescript"><span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Laya<span class="token punctuation">.</span>Byte<span class="token punctuation">.</span><span class="token function">getSystemEndian</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//Print the byte order of the system</span>
</code></pre>
</li>
</ul>
<h4 id="322-properties"><a name="322-properties" class="anchor-navigation-ex-anchor" href="#322-properties"><i class="fa fa-link" aria-hidden="true"></i></a>3.2.2 Properties</h4>
<ul>
<li><p><code>BIG_ENDIAN : string= bigEndian[static]</code> means that the most significant byte of a multibyte number is at the beginning of the byte sequence.</p>
</li>
<li><p><code>LITTLE_ENDIAN : string= littleEndian[static]</code> means that the least significant byte of a multi-byte number is at the beginning of the byte sequence.</p>
</li>
<li><p><code>pos</code>number currently reads the position.</p>
<pre class="language-"><code class="lang-typescript"><span class="token keyword">var</span> byte<span class="token operator">:</span>Laya<span class="token punctuation">.</span>Byte <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Laya</span><span class="token punctuation">.</span><span class="token function">Byte</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
byte<span class="token punctuation">.</span><span class="token function">writeInt16</span><span class="token punctuation">(</span><span class="token number">120</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
byte<span class="token punctuation">.</span>pos <span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token comment">//Return the reading position to zero.</span>
</code></pre>
</li>
<li><p><code>length: number</code> Length in bytes.</p>
</li>
<li><p><code>endian : string</code> byte order.</p>
<pre class="language-"><code class="lang-typescript"><span class="token keyword">var</span> byte<span class="token operator">:</span>Laya<span class="token punctuation">.</span>Byte <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Laya</span><span class="token punctuation">.</span><span class="token function">Byte</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
byte<span class="token punctuation">.</span>endian <span class="token operator">=</span> Laya<span class="token punctuation">.</span>Byte<span class="token punctuation">.</span><span class="token constant">BIG_ENDIAN</span><span class="token punctuation">;</span> <span class="token comment">//Set to big endian;</span>
</code></pre>
</li>
<li><p><code>bytesAvailable : number[read-only]</code>The number of bytes of data that can be read from the current position of the byte stream to the end.</p>
<pre class="language-"><code class="lang-typescript"><span class="token keyword">var</span> byte<span class="token operator">:</span>Laya<span class="token punctuation">.</span>Byte <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Laya</span><span class="token punctuation">.</span><span class="token function">Byte</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
byte<span class="token punctuation">.</span><span class="token function">writeFloat32</span><span class="token punctuation">(</span><span class="token number">20.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
byte<span class="token punctuation">.</span><span class="token function">writeInt16</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
byte<span class="token punctuation">.</span><span class="token function">writeUTFString</span><span class="token punctuation">(</span><span class="token string">&quot;hell world&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
byte<span class="token punctuation">.</span>pos <span class="token operator">=</span> <span class="token number">6</span><span class="token punctuation">;</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>byte<span class="token punctuation">.</span>bytesAvailable<span class="token punctuation">)</span>
</code></pre>
</li>
</ul>
<h4 id="323-code-demonstration"><a name="323-code-demonstration" class="anchor-navigation-ex-anchor" href="#323-code-demonstration"><i class="fa fa-link" aria-hidden="true"></i></a>3.2.3 Code Demonstration</h4>
<p>Below we use a complete code to demonstrate the application of this class. For example, in network connection, we receive and send network messages.</p>
<pre class="language-"><code class="lang-typescript"><span class="token keyword">var</span> msg<span class="token operator">:</span><span class="token builtin">any</span> <span class="token operator">=</span><span class="token punctuation">{</span>name<span class="token operator">:</span><span class="token string">&quot;xxx&quot;</span><span class="token punctuation">,</span>age<span class="token operator">:</span><span class="token number">18</span><span class="token punctuation">,</span>weight<span class="token operator">:</span><span class="token number">65.5</span><span class="token punctuation">,</span>height<span class="token operator">:</span><span class="token number">175</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> byte<span class="token operator">:</span>Laya<span class="token punctuation">.</span>Byte <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Laya</span><span class="token punctuation">.</span><span class="token function">Byte</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//instantiate byte array</span>
byte<span class="token punctuation">.</span>endian <span class="token operator">=</span> Laya<span class="token punctuation">.</span>Byte<span class="token punctuation">.</span><span class="token constant">LITTLE_ENDIAN</span><span class="token punctuation">;</span>
<span class="token comment">//Set the big and small ends</span>
byte<span class="token punctuation">.</span><span class="token function">writeUTFString</span><span class="token punctuation">(</span>msg<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//data input</span>
byte<span class="token punctuation">.</span><span class="token function">writeByte</span><span class="token punctuation">(</span>msg<span class="token punctuation">.</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span>
byte<span class="token punctuation">.</span><span class="token function">writeFloat32</span><span class="token punctuation">(</span>msg<span class="token punctuation">.</span>weight<span class="token punctuation">)</span><span class="token punctuation">;</span>
byte<span class="token punctuation">.</span><span class="token function">writeInt16</span><span class="token punctuation">(</span>msg<span class="token punctuation">.</span>height<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>Take a look at the output:</p>
<pre class="language-"><code class="lang-typescript"><span class="token comment">//Set pos to 0 and start reading from the beginning in the order of writing.</span>
byte<span class="token punctuation">.</span>pos <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>byte<span class="token punctuation">.</span><span class="token function">getUTFString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>byte<span class="token punctuation">.</span><span class="token function">getByte</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>byte<span class="token punctuation">.</span><span class="token function">getFloat32</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>byte<span class="token punctuation">.</span><span class="token function">getInt16</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h4 id="324-typed-array"><a name="324-typed-array" class="anchor-navigation-ex-anchor" href="#324-typed-array"><i class="fa fa-link" aria-hidden="true"></i></a>3.2.4 Typed array</h4>
<p>Laya&apos;s byte package is a typed array. Developers can refer to mdn&apos;s official API description. to expand the application of your own project.</p>
<ul>
<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/DataView" target="_blank">DataView</a> view provides a view that matches the platform&apos;s order of bytes in memory (endian ) Independent low-level interface for reading and writing multi-numeric types from <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/ArrayBuffer" target="_blank"><code>ArrayBuffer</code></a>.</li>
<li><a href="https://developer.mozilla.org/zh_CN/docs/Web/JavaScript/Reference/Global_Objects/Uint8Array" target="_blank">Uint8Array</a> The array type represents an 8-bit unsigned integer array, and the content is initialized to 0 when created. After creation, the elements in the array can be referenced as objects or using array subscript indexing.</li>
<li><strong>Int8Array</strong>: Type array represents an array of two&apos;s complement 8-bit signed integers. Contents are initialized to 0. Once created, you can use the object&apos;s methods to reference elements in the array, or use standard array indexing syntax.</li>
<li><strong>Int16Array()</strong>; type array represents a two&apos;s complement 16-bit signed array.</li>
<li><strong>Uint16Array()</strong>; type array represents a two&apos;s complement 16-bit unsigned array</li>
<li><strong>Int32Array()</strong>; type array represents a two&apos;s complement 32-bit signed array</li>
<li><strong>Uint32Array()</strong>; type array represents a two&apos;s complement 32-bit unsigned array</li>
<li><strong>Float32Array()</strong>; type array represents a 32-bit floating point array.</li>
<li><strong>Float64Array()</strong>; type array represents a 64-bit floating point array.</li>
</ul>
<h2 id="4-use-of-protocolbuffer"><a name="4-use-of-protocolbuffer" class="anchor-navigation-ex-anchor" href="#4-use-of-protocolbuffer"><i class="fa fa-link" aria-hidden="true"></i></a>4. Use of ProtocolBuffer</h2>
<p><strong>protocolbuffer</strong> (hereinafter referred to as PB) is a data exchange format of Google. It is independent of language and platform. Similar to data representation languages &#x200B;&#x200B;such as XML and JSON, ProtocolBuffer is a flexible, efficient, and automatic method for serializing structured data. The format is somewhat similar to XML. You can define the data format yourself. It is a binary format that allows you to use A canonical language defines a pattern.</p>
<p>As a protocol format for network communication, ProtocolBuffer is a very popular method now. Let&apos;s take a look at it.</p>
<h3 id="41-message-definition"><a name="41-message-definition" class="anchor-navigation-ex-anchor" href="#41-message-definition"><i class="fa fa-link" aria-hidden="true"></i></a>4.1 Message Definition</h3>
<p>Here is a simple example, which is a very simple request message format.</p>
<pre class="language-"><code class="lang-typescript"><span class="token comment">// awesome.proto</span>
<span class="token keyword">package</span> awesomepackage<span class="token punctuation">;</span>

<span class="token comment">//Specify proto version</span>
syntax <span class="token operator">=</span> <span class="token string">&quot;proto3&quot;</span><span class="token punctuation">;</span>

<span class="token comment">//message contains multiple types of fields</span>
message AwesomeMessage <span class="token punctuation">{</span>
    <span class="token builtin">string</span> awesome_field <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">// becomes awesomeField</span>
<span class="token punctuation">}</span>
</code></pre>
<p>In the above example, the type of fields is string. Of course, you can also specify more complex fields, such as enumeration type enum, or nested message type.</p>
<p>After the above Message is defined, we save the protocol file to the project directory</p>
<p>&quot;assets/res/protobuf/awesome.proto&quot;;</p>
<h3 id="42-add-protobuf-class-library-to-the-project"><a name="42-add-protobuf-class-library-to-the-project" class="anchor-navigation-ex-anchor" href="#42-add-protobuf-class-library-to-the-project"><i class="fa fa-link" aria-hidden="true"></i></a>4.2 Add protobuf class library to the project</h3>
<p>We can download the latest <code>protobuf</code> class library from <a href="https://github.com/protobufjs/protobuf.js" target="_blank">https://github.com/protobufjs/protobuf.js</a> and put it in the bin directory of the project, and reference protobuf.js in index.html</p>
<pre class="language-"><code class="lang-typescript">    <span class="token operator">&lt;</span>script type<span class="token operator">=</span><span class="token string">&quot;text/javascript&quot;</span> src<span class="token operator">=</span><span class="token string">&quot;protobuf.js&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre>
<h3 id="43-load-protocol-file"><a name="43-load-protocol-file" class="anchor-navigation-ex-anchor" href="#43-load-protocol-file"><i class="fa fa-link" aria-hidden="true"></i></a>4.3 Load protocol file</h3>
<p><code>protobuf</code> class library, loads protocol files through the load method</p>
<pre class="language-"><code class="lang-typescript"><span class="token comment">/**
 * Loads one or multiple .proto or preprocessed .json files into a common root namespace and calls the callback.
 * @param {string|string[]} filename One or multiple files to load
 * @param {Root} root Root namespace, defaults to create a new one if omitted.
 * @param {LoadCallback} callback Callback function
 * @returns {undefined}
 * @see {@link Root#load}
 */</span>
<span class="token keyword">function</span> <span class="token function">load</span><span class="token punctuation">(</span>filename<span class="token punctuation">,</span> root<span class="token punctuation">,</span> callback<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> root <span class="token operator">===</span> <span class="token string">&quot;function&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        callback <span class="token operator">=</span> root<span class="token punctuation">;</span>
        root <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">protobuf</span><span class="token punctuation">.</span><span class="token function">Root</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>root<span class="token punctuation">)</span>
        root <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">protobuf</span><span class="token punctuation">.</span><span class="token function">Root</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> root<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span>filename<span class="token punctuation">,</span> callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<h3 id="44-message-method"><a name="44-message-method" class="anchor-navigation-ex-anchor" href="#44-message-method"><i class="fa fa-link" aria-hidden="true"></i></a>4.4 Message method</h3>
<ul>
<li>Message.verify(message: Object): null|string</li>
</ul>
<p>Verify whether a Message object meets the requirements for a valid message.</p>
<ul>
<li>Message.create(properties: Object): Message</li>
</ul>
<p>Creates a new message instance from a set of Javascript data that meets the requirements for a valid message.</p>
<ul>
<li>Message.encode(message: Message|Object , writer: Writer): Writer</li>
</ul>
<p>Encode the Message object for network communication transmission.</p>
<ul>
<li>Message.decode(reader: Reader|Uint8Array): Message</li>
</ul>
<p>In network communication transmission data, the Mesaage object is obtained by decoding.</p>
<ul>
<li>Message.toObject(message: Message , options: ConversionOptions): Object</li>
</ul>
<p>Convert Message object data to a set of Javascript data.</p>
<h3 id="45-code-example"><a name="45-code-example" class="anchor-navigation-ex-anchor" href="#45-code-example"><i class="fa fa-link" aria-hidden="true"></i></a>4.5 Code Example</h3>
<pre class="language-"><code class="lang-typescript">    <span class="token function">onAwake</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>

        <span class="token keyword">var</span> resPath<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">&quot;assets/res/protobuf/awesome.proto&quot;</span><span class="token punctuation">;</span>
        <span class="token comment">//Load protobuf file</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>ProtoBuf<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span>resPath<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>onAssetsLoaded<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token function">onAssetsLoaded</span><span class="token punctuation">(</span>err<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">,</span> root<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span>
            <span class="token keyword">throw</span> err<span class="token punctuation">;</span>

        <span class="token comment">// Get a Message message type</span>
        <span class="token class-name"><span class="token keyword">var</span></span> AwesomeMessage<span class="token operator">:</span> <span class="token builtin">any</span> <span class="token operator">=</span> root<span class="token punctuation">.</span><span class="token function">lookupType</span><span class="token punctuation">(</span><span class="token string">&quot;awesomepackage.AwesomeMessage&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>AwesomeMessage<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// Initialization data</span>
        <span class="token keyword">var</span> payload<span class="token operator">:</span> <span class="token builtin">any</span> <span class="token operator">=</span> <span class="token punctuation">{</span> awesomeField<span class="token operator">:</span> <span class="token string">&quot;AwesomeString&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>payload<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//Verify whether the data is valid</span>
        <span class="token keyword">var</span> errMsg<span class="token operator">:</span> <span class="token builtin">any</span> <span class="token operator">=</span> AwesomeMessage<span class="token punctuation">.</span><span class="token function">verify</span><span class="token punctuation">(</span>payload<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// If there is an exception, throw an exception and terminate</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>errMsg<span class="token punctuation">)</span>
            <span class="token keyword">throw</span> <span class="token function">Error</span><span class="token punctuation">(</span>errMsg<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//Create the entity of Message</span>
        <span class="token keyword">var</span> message<span class="token operator">:</span> <span class="token builtin">any</span> <span class="token operator">=</span> AwesomeMessage<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>payload<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//Compile Message entity into Buffer data format and wait for sending data</span>
        <span class="token keyword">var</span> buffer<span class="token operator">:</span> <span class="token builtin">any</span> <span class="token operator">=</span> AwesomeMessage<span class="token punctuation">.</span><span class="token function">encode</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">finish</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>buffer<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>
</code></pre>
<footer class="page-footer"><span class="copyright">Copyright &#xA9;Layabox 2022 all right reserved&#xFF0C;powered by <a href="https://layaAir.layabox.com/" target="_blank">LayaAir</a> Engine</span><span class="footer-modification">Update&#xFF1A;
2024-02-22 15:51:22
</span></footer>
<script>console.log("plugin-popup....");document.onclick = function(e){ e.target.tagName === "IMG" && window.open(e.target.src,e.target.src)}</script><style>img{cursor:pointer}</style>
                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="../Pool/readme.html" class="navigation navigation-prev " aria-label="Previous page: Pool">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="../adaptScreen/readme.html" class="navigation navigation-next " aria-label="Next page: adaptScreen">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"network","level":"1.2.2.10","depth":3,"next":{"title":"adaptScreen","level":"1.2.2.11","depth":3,"path":"basics/common/adaptScreen/readme.md","ref":"basics/common/adaptScreen/readme.md","articles":[]},"previous":{"title":"Pool","level":"1.2.2.9","depth":3,"path":"basics/common/Pool/readme.md","ref":"basics/common/Pool/readme.md","articles":[]},"dir":"ltr"},"config":{"plugins":["expandable-chapters-small","sidebar-style","anchor-navigation-ex","-lunr","-search","-sharing","search-pro","versions-select","-favicon","favicon-absolute","fontsettings","prism","splitter","code","flexible-alerts","auto-scroll-table","popup","tbfed-pagefooter","-theme-hqbook"],"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"sidebar-style":{"author":"","title":""},"tbfed-pagefooter":{"copyright":"Copyright ©Layabox 2022","modify_label":"Update：","modify_format":"YYYY-MM-DD HH:mm:ss"},"prism":{"css":["prismjs/themes/prism-solarizedlight.css"],"lang":{"flow":"typescript"},"ignore":["mermaid","eval-js"]},"splitter":{},"search-pro":{},"auto-scroll-table":{},"popup":{},"code":{"copyButtons":true},"versions-select":{"type":"branches"},"favicon-absolute":{"appleTouchIconMore":{},"appleTouchIconPrecomposed152":"./style/layabox-152.png","appleTouchIconPrecomposedMore":{},"favicon":"./style/favicon-32.ico","bookmark":"./style/favicon-32.ico"},"fontsettings":{"family":"sans","size":2,"theme":"white"},"highlight":{},"anchor-navigation-ex":{"associatedWithSummary":true,"float":{"floatIcon":"fa fa-navicon","level1Icon":"","level2Icon":"","level3Icon":"","showLevelIcon":false},"mode":"float","multipleH1":false,"pageTop":{"level1Icon":"","level2Icon":"","level3Icon":"","showLevelIcon":false},"printLog":false,"showGoTop":true,"showLevel":false},"expandable-chapters-small":{},"flexible-alerts":{"danger":{"className":"danger","icon":"fa fa-ban","label":"Attention"},"note":{"className":"info","icon":"fa fa-info-circle","label":"Note"},"style":"callout","tip":{"className":"tip","icon":"fa fa-lightbulb-o","label":"Tip"},"warning":{"className":"warning","icon":"fa fa-exclamation-triangle","label":"Warning"}},"versions":{"options":[{"value":"https://layaAir.com/3.1/doc/","text":"v3.1"}]},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"theme":"default","style":{"website":"style/website.css"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"LayaAir3 Engine Documentation · LAYABOX","gitbook":"*"},"file":{"path":"basics/common/network/readme.md","mtime":"2024-02-22T07:51:22.974Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2024-03-06T02:40:20.315Z"},"basePath":"../../..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../../../gitbook/gitbook.js"></script>
    <script src="../../../gitbook/theme.js"></script>
    
        
        <script src="../../../gitbook/gitbook-plugin-expandable-chapters-small/expandable-chapters-small.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-sidebar-style/plugin.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-search-pro/jquery.mark.min.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-search-pro/search.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-versions-select/plugin.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-splitter/splitter.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-code/plugin.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-flexible-alerts/plugin.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-auto-scroll-table/plugin.js"></script>
        
    

    </body>
</html>

